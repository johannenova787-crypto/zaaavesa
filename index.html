<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Завеса в Мир Эни</title>

<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;600&display=swap" rel="stylesheet">

<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: radial-gradient(circle at top, #fffaf0, #f2e3c6);
  overflow: hidden;
  font-family: 'Cormorant Garamond', serif;
}

.veil-container {
  position: relative;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Завеса */
.veil {
  position: absolute;
  inset: 0;
  background:
    linear-gradient(120deg,
      rgba(255,255,255,0.45),
      rgba(255,225,170,0.25),
      rgba(255,255,255,0.45));
  animation: veilFlow 18s ease-in-out infinite;
  z-index: 2;
  transition: transform 3s ease, opacity 3s ease;
}

.veil.open {
  transform: scaleX(0);
  opacity: 0;
}

@keyframes veilFlow {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.portal {
  position: relative;
  z-index: 3;
  text-align: center;
}

.portal-title {
  font-size: clamp(52px, 6vw, 88px);
  letter-spacing: 0.14em;
  color: #c9a14a;
  text-shadow:
    0 0 10px rgba(255,215,150,0.5),
    0 0 22px rgba(255,200,120,0.35);
  margin-bottom: 40px;
}

.whisper {
  margin-top: 34px;
  font-size: 44px;
  letter-spacing: 0.14em;
  color: #c9a14a;
  opacity: 0;
  animation: whisperAppear 6s ease forwards;
  animation-delay: 2s;
}

@keyframes whisperAppear {
  to { opacity: 1; }
}

.open-button {
  font-size: 26px;
  letter-spacing: 0.15em;
  padding: 18px 48px;
  border-radius: 60px;
  border: 1px solid rgba(200,160,80,0.6);
  background: rgba(255,245,220,0.7);
  color: #9c7a2f;
  cursor: pointer;
  transition: all 0.6s ease;
}

.open-button:hover {
  transform: scale(1.05);
  box-shadow: 0 0 30px rgba(255,220,160,0.7);
}

/* Частицы */
canvas {
  position: absolute;
  inset: 0;
  z-index: 1;
}
</style>
</head>

<body>

<audio id="veilSound" src="sound/veil.mp3" preload="auto"></audio>

<div class="veil-container">
  <canvas id="particles"></canvas>
  <div class="veil" id="veil"></div>

  <div class="portal">
    <div class="portal-title">Завеса в Мир Эни</div>
    <button class="open-button" onclick="openVeil()">Открыть</button>
    <div class="whisper">
      Пусть звучит и раскрывается,<br>
      где бы ты ни был…
    </div>
  </div>
</div>

<script>
const sound = document.getElementById('veilSound');
const veil = document.getElementById('veil');

function openVeil() {
  sound.volume = 0.8;
  sound.play();

  veil.classList.add('open');

  setTimeout(() => {
    document.body.style.transition = "opacity 2.5s ease";
    document.body.style.opacity = "0";
  }, 2500);

  setTimeout(() => {
    window.location.href = "home.html";
  }, 5000);
}

/* Частицы */
const canvas = document.getElementById('particles');
const ctx = canvas.getContext('2d');

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener('resize', resize);

let particles = [];
for (let i = 0; i < 120; i++) {
  particles.push({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    r: Math.random() * 1.8 + 0.6,
    v: Math.random() * 0.3 + 0.1,
    a: Math.random() * Math.PI * 2
  });
}

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach(p => {
    p.y -= p.v;
    p.a += 0.01;
    if (p.y < -10) p.y = canvas.height + 10;
    ctx.beginPath();
    ctx.fillStyle = "rgba(210,170,90,0.6)";
    ctx.arc(p.x + Math.sin(p.a)*4, p.y, p.r, 0, Math.PI*2);
    ctx.fill();
  });
  requestAnimationFrame(draw);
}
draw();
</script>

</body>
</html>
